namespace = flavor_burgundy

# Event 100: The Capetian Extinction (1361)
flavor_burgundy.100 = {
	type = country_event
	title = flavor_burgundy.100.t
	desc = flavor_burgundy.100.d
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = BUR
		from = 1361.1.1
		to = 1361.12.31
		monthly_chance = 100
	}
	
	illustration_tags = {
		10 = death
		10 = interior
	}
	
	trigger = {
		tag = c:BUR
		is_subject_of = c:FRA
		c:FRA = { exists = yes }
	}
	
	immediate = {
		hidden_effect = {
			save_scope_as = burgundy_country
		}
	}
	
	option = {
		name = flavor_burgundy.100.a
		historical_option = yes
		
		ai_chance = {
			base = 75
			modifier = {
				factor = 1.5
				trigger = {
					stability >= 1
				}
			}
		}
		
		custom_tooltip = flavor_burgundy.100.a.tt
		
		# Change from appanage to fiefdom - losing autonomy after succession crisis
		if = {
			limit = { 
				is_subject_of = c:FRA
				c:FRA = { exists = yes }
			}
			make_subject_of = {
				target = c:FRA
				type = subject_type:fiefdom
			}
		}
		
		add_stability = -1
		add_prestige = -15
		
		# Trigger the Valois succession event
		trigger_event = {
			id = flavor_burgundy.101
			days = 60
		}
		
		if = {
			limit = { c:FRA = { exists = yes } }
			c:FRA = {
				add_opinion = {
					target = root
					modifier = burgundy_relations_positive
				}
			}
		}
	}
	
	option = {
		name = flavor_burgundy.100.b
		
		ai_chance = {
			base = 25
			modifier = {
				factor = 2
				trigger = {
					stability < -1
				}
			}
		}
		
		add_stability = -2
		add_legitimacy = -20
		
		if = {
			limit = { c:FRA = { exists = yes } }
			c:FRA = {
				add_opinion = {
					target = root
					modifier = burgundy_relations_negative
				}
			}
		}
	}
}

# Event 101: The Valois Appanage (1363)
flavor_burgundy.101 = {
	type = country_event
	title = flavor_burgundy.101.t
	desc = flavor_burgundy.101.d
	fire_only_once = yes
	
	illustration_tags = {
		10 = prosperity
		10 = interior
	}
	
	immediate = {
		hidden_effect = {
			save_scope_as = burgundy_country
			create_character = {
				dynasty = dynasty:valois_dynasty
				culture = root.GetPrimaryCulture
				religion = root.GetStateReligion
				age = 22
				first_name = name_philip
				adm = { 60 75 }
				dip = { 70 85 }
				mil = { 55 70 }
				add_trait = trait:expansionist
				add_trait = trait:well_connected
				create_in_limbo = yes
				save_scope_as = philip_the_bold
			}
		}
	}
	
	option = {
		name = flavor_burgundy.101.a
		historical_option = yes
		
		ai_chance = {
			base = 90
			modifier = {
				factor = 1.25
				trigger = {
					is_subject_of = c:FRA
				}
			}
		}

		if = {
			limit = { 
				is_subject_of = c:FRA
				c:FRA = { exists = yes }
			}
			make_subject_of = {
				target = c:FRA
				type = subject_type:appanage
			}
		}
		
		scope:philip_the_bold = {
			move_country = root
		}
		
		set_new_ruler = scope:philip_the_bold

		add_prestige = 25
		add_legitimacy = 15
		
		add_country_modifier = {
			modifier = loyal_appanage
			years = 6
		}
		
		custom_tooltip = flavor_burgundy.101.a.tt
		
		if = {
			limit = { c:FRA = { exists = yes } }
			c:FRA = {
				add_opinion = {
					target = root
					modifier = burgundy_relations_positive
				}
			}
		}
	}
	
	option = {
		name = flavor_burgundy.101.b
		
		ai_chance = {
			base = 10
		}
		
		add_stability = -1
		add_legitimacy = -10
		
		if = {
			limit = { c:FRA = { exists = yes } }
			c:FRA = {
				add_opinion = {
					target = root
					modifier = burgundy_relations_negative
				}
			}
		}
	}
}



# Event 102: The Battle of Roosebeke and the Counter-Offensive (1382)
flavor_burgundy.102 = {
	type = country_event
	title = flavor_burgundy.102.t
	desc = flavor_burgundy.102.d
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = BUR
		from = 1380.1.1
		to = 1395.12.31
		monthly_chance = 50
	}
	
	illustration_tags = {
		10 = war
		10 = armed
	}
	
	trigger = {
		tag = c:BUR
		any_owned_location = {
			OR = {
				location_region = region:brabant_region
				location_region = region:flanders_region
				location_region = region:holland_region
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			save_scope_as = burgundy_country
		}
	}
	
	option = {
		name = flavor_burgundy.102.a
		historical_option = yes
		
		ai_chance = {
			base = 70
			modifier = {
				factor = 1.5
				trigger = {
					prestige >= 30
				}
			}
		}
		
		add_country_modifier = {
			modifier = flanders_marriage_alliance
			years = 5
		}
		add_prestige = 20
	}
	
	option = {
		name = flavor_burgundy.102.b
		
		ai_chance = {
			base = 30
			modifier = {
				factor = 2
				trigger = {
					stability < 0
				}
			}
		}
		
		add_stability = 1
		add_prestige = 10
	}
}

# Event 103: The Golden Age (1400-1430)
flavor_burgundy.103 = {
	type = country_event
	title = flavor_burgundy.103.t
	desc = flavor_burgundy.103.d
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = BUR
		from = 1400.1.1
		to = 1430.12.31
		monthly_chance = 40
	}
	
	illustration_tags = {
		10 = prosperity
		10 = interior
	}
	
	trigger = {
		tag = c:BUR
		prestige >= 50
		any_owned_location = {
			development >= 10
		}
	}
	
	immediate = {
		hidden_effect = {
			save_scope_as = burgundy_country
		}
	}
	
	option = {
		name = flavor_burgundy.103.a
		historical_option = yes
		
		ai_chance = {
			base = 80
			modifier = {
				factor = 1.25
				trigger = {
					prestige >= 60
				}
			}
		}
		
		add_country_modifier = {
			modifier = burgundian_golden_age
			years = 10
		}
		add_prestige = 30
	}
	
	option = {
		name = flavor_burgundy.103.b
		
		ai_chance = {
			base = 20
		}
		
		add_stability = 2
		add_prestige = 15
	}
}

# Event 104: The Crisis of Succession (1467-1477)
flavor_burgundy.104 = {
	type = country_event
	title = flavor_burgundy.104.t
	desc = flavor_burgundy.104.d
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = BUR
		from = 1467.1.1
		to = 1477.12.31
		monthly_chance = 50
	}
	
	illustration_tags = {
		10 = death
		10 = angry
	}
	
	trigger = {
		tag = c:BUR
		NOT = { is_subject = no }
	}
	
	immediate = {
		hidden_effect = {
			save_scope_as = burgundy_country
		}
	}
	
	option = {
		name = flavor_burgundy.104.a
		historical_option = yes
		
		ai_chance = {
			base = 65
			modifier = {
				factor = 1.5
				trigger = {
					legitimacy >= 50
				}
			}
		}
		
		add_country_modifier = {
			modifier = succession_crisis_modifier
			years = 5
		}
		add_prestige = 25
		add_stability = 2
	}
	
	option = {
		name = flavor_burgundy.104.b
		
		ai_chance = {
			base = 35
			modifier = {
				factor = 0
				trigger = {
					stability >= 2
				}
			}
		}
		
		add_prestige = -15
		add_stability = -2
		add_war_exhaustion = 5
	}
}

# Event 105: The Burgundian Circle (1500-1525)
flavor_burgundy.105 = {
	type = country_event
	title = flavor_burgundy.105.t
	desc = flavor_burgundy.105.d
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = BUR
		from = 1500.1.1
		to = 1525.12.31
		monthly_chance = 30
	}
	
	illustration_tags = {
		10 = prosperity
		10 = interior
	}
	
	trigger = {
		tag = c:BUR
		any_owned_location = {
			OR = {
				location_region = region:brabant_region
				location_region = region:flanders_region
				location_region = region:holland_region
			}
		}
		prestige >= 40
	}
	
	immediate = {
		hidden_effect = {
			save_scope_as = burgundy_country
		}
	}
	
	option = {
		name = flavor_burgundy.105.a
		historical_option = yes
		
		ai_chance = {
			base = 75
			modifier = {
				factor = 1.5
				trigger = {
					prestige >= 50
				}
			}
		}
		
		add_country_modifier = {
			modifier = burgundy_pragmatic_sanction
			years = 15
		}
		set_government_rank_value = 1
		add_prestige = 35
	}
	
	option = {
		name = flavor_burgundy.105.b
		
		ai_chance = {
			base = 25
		}
		
		add_stability = 2
		add_prestige = 20
	}
}

# Event 106: Religious Tensions (1550-1580)
flavor_burgundy.106 = {
	type = country_event
	title = flavor_burgundy.106.t
	desc = flavor_burgundy.106.d
	fire_only_once = yes
	
	dynamic_historical_event = {
		tag = BUR
		from = 1550.1.1
		to = 1580.12.31
		monthly_chance = 40
	}
	
	illustration_tags = {
		10 = religion
		10 = conflict
	}
	
	trigger = {
		tag = c:BUR
		is_subject_of = c:SPA
		c:SPA = { exists = yes }
		any_owned_location = {
			OR = {
				location_region = region:brabant_region
				location_region = region:flanders_region
			}
		}
	}
	
	immediate = {
		hidden_effect = {
			save_scope_as = burgundy_country
			random_neighbor_country = {
				limit = { tag = c:SPA }
				save_scope_as = spain_country
			}
		}
	}
	
	option = {
		name = flavor_burgundy.106.a
		
		ai_chance = {
			base = 40
			modifier = {
				factor = 2
				trigger = {
					stability >= 1
				}
			}
		}
		
		every_owned_location = {
			limit = {
				OR = {
					location_region = region:brabant_region
					location_region = region:flanders_region
				}
			}
			add_location_modifier = {
				modifier = religious_tensions
				years = 10
				mode = add_and_extend
			}
		}
		add_stability = 1
		if = {
			limit = { c:SPA ?= { exists = yes } }
			c:SPA = {
				add_opinion = {
					target = root
					modifier = burgundy_relations_positive
				}
			}
		}
	}
	
	option = {
		name = flavor_burgundy.106.b
		historical_option = yes
		
		ai_chance = {
			base = 60
			modifier = {
				factor = 0.5
				trigger = {
					stability < 0
				}
			}
		}
		
		every_owned_location = {
			limit = {
				OR = {
					location_region = region:brabant_region
					location_region = region:flanders_region
				}
			}
			add_rebel_progress = 30
		}
		add_stability = -2
		if = {
			limit = { c:SPA = { exists = yes } }
			c:SPA = {
				add_opinion = {
					target = root
					modifier = burgundy_relations_negative
				}
			}
		}
	}
}





