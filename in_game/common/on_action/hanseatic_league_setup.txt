namespace = hanseatic_league_setup

# Initialize Hanseatic League on game start
on_game_start = {
	on_actions = {
		hanseatic_league_setup.1
	}
}

# Create Hanseatic League IO
hanseatic_league_setup.1 = {
	type = country_event
	hidden = yes
	fire_only_once = yes

	trigger = {
		tag = c:HSA
		current_date >= 1337.1.1
		NOT = { has_global_variable = hanseatic_league_initialized }
	}

	immediate = {
		set_global_variable = {
			name = hanseatic_league_initialized
			value = yes
		}

		# Create the Hanseatic League with available members at 1337
		create_international_organization = {
			type = hanseatic_league
			leader = c:HSA
		}

		# Add founding members if they exist
		if = {
			limit = {
				c:HSA = { exists = yes }
			}
			c:HSA = {
				join_international_organization = hanseatic_league
			}
		}

		if = {
			limit = {
				c:LUB = { exists = yes }
			}
			c:LUB = {
				join_international_organization = hanseatic_league
			}
		}

		if = {
			limit = {
				c:HAM = { exists = yes }
			}
			c:HAM = {
				join_international_organization = hanseatic_league
			}
		}

		if = {
			limit = {
				c:BRM = { exists = yes }
			}
			c:BRM = {
				join_international_organization = hanseatic_league
			}
		}
	}
}
